<%- include('../../partials/header') %>
<div class="container my-5">
  <h1 class="mb-4 text-center display-5 fw-bold text-accent">
    Tour Management
  </h1>
  <div class="mb-3 text-end">
    <a href="/admin/tours/new" class="btn btn-accent rounded-pill px-4"
      >+ Add New Tour</a
    >
  </div>
  <% if (error) { %>
  <div class="alert alert-danger text-center"><%= error %></div>
  <% } %>
  <div class="table-responsive">
    <table
      class="table table-bordered table-hover align-middle bg-white shadow-sm"
    >
      <thead class="table-light">
        <tr class="text-center align-middle">
          <th>Tour Name</th>
          <th>Start Date</th>
          <th>Price</th>
          <th>Bookings</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% tours.forEach(function(tour) { %>
        <tr>
          <td><%= tour.title %></td>
          <td>
            <%= tour.date ? (new Date(tour.date).toLocaleDateString('en-GB')) :
            '' %>
          </td>
          <td><%= tour.price %></td>
          <td><%= tour.bookingsCount || 0 %></td>
          <td>
            <a
              href="/admin/tours/<%= tour._id %>/edit"
              class="btn btn-outline-primary btn-sm rounded-pill me-2"
              >Edit</a
            >
            <a
              href="/admin/tours/<%= tour._id %>/bookings"
              class="btn btn-outline-success btn-sm rounded-pill"
              >View Bookings</a
            >
            <form
              action="/admin/tours/<%= tour._id %>/delete"
              method="POST"
              style="display: inline"
            >
              <button
                type="submit"
                class="btn btn-outline-danger btn-sm rounded-pill"
                onclick="return confirm('Are you sure you want to delete this tour?')"
              >
                Delete
              </button>
            </form>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>
<style>
  .text-accent {
    color: #64b5f6 !important;
  }

  .btn-accent {
    background-color: #64b5f6;
    border-color: #64b5f6;
    font-weight: bold;
    color: #fff;
  }

  .btn-accent:hover {
    background-color: #42a5f5;
    border-color: #42a5f5;
    color: #fff;
  }

  .table thead th {
    vertical-align: middle;
  }

  .table td,
  .table th {
    vertical-align: middle;
  }
</style>
<%- include('../../partials/footer') %>
